function setCookie(t){document.cookie="proferotech-language="+t+"; domain=proferotech.com; path=/"}function getCookie(t){for(var e=t+"=",n=document.cookie.split(";"),o=0;n.length>o;o++){for(var i=n[o];" "==i.charAt(0);)i=i.substring(1,i.length);if(0==i.indexOf(e)){var r=i.substring(e.length,i.length);return r=r.replace(/'/g,'"')}}return null}function resizePortfolioItems(){var t=$(".portfolio-item").get();for(i=0;t.length>i;i++){var e=$(t[i]),n=e.width(),o=e.data("bgoffset"),r=-o*n+"px 0";e.css({"background-position":r,height:n})}}function beforePrint(){$(".testimonials").cbpQTRotator("destroy")}function afterPrint(){$(".testimonials").cbpQTRotator("_init")}window.enquire=function(t){"use strict";function e(t,e){var n,o=0,i=t.length;for(o;i>o&&(n=e(t[o],o),n!==!1);o++);}function n(t){return"[object Array]"===Object.prototype.toString.apply(t)}function o(t){return"function"==typeof t}function i(t){this.options=t,!t.deferSetup&&this.setup()}function r(e,n){this.query=e,this.isUnconditional=n,this.handlers=[],this.mql=t(e);var o=this;this.listener=function(t){o.mql=t,o.assess()},this.mql.addListener(this.listener)}function s(){if(!t)throw Error("matchMedia not present, legacy browsers require a polyfill");this.queries={},this.browserIsIncapable=!t("only all").matches}return i.prototype={setup:function(){this.options.setup&&this.options.setup(),this.initialised=!0},on:function(){!this.initialised&&this.setup(),this.options.match&&this.options.match()},off:function(){this.options.unmatch&&this.options.unmatch()},destroy:function(){this.options.destroy?this.options.destroy():this.off()},equals:function(t){return this.options===t||this.options.match===t}},r.prototype={addHandler:function(t){var e=new i(t);this.handlers.push(e),this.mql.matches&&e.on()},removeHandler:function(t){var n=this.handlers;e(n,function(e,o){return e.equals(t)?(e.destroy(),!n.splice(o,1)):void 0})},clear:function(){e(this.handlers,function(t){t.destroy()}),this.mql.removeListener(this.listener),this.handlers.length=0},assess:function(){var t=this.mql.matches||this.isUnconditional?"on":"off";e(this.handlers,function(e){e[t]()})}},s.prototype={register:function(t,i,s){var a=this.queries,c=s&&this.browserIsIncapable;return a[t]||(a[t]=new r(t,c)),o(i)&&(i={match:i}),n(i)||(i=[i]),e(i,function(e){a[t].addHandler(e)}),this},unregister:function(t,e){var n=this.queries[t];return n&&(e?n.removeHandler(e):(n.clear(),delete this.queries[t])),this}},new s}(window.matchMedia),function(t){var e=!1,n=!1,o={isUrl:function(t){var e=RegExp("^(https?:\\/\\/)?((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|((\\d{1,3}\\.){3}\\d{1,3}))(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*(\\?[;&a-z\\d%_.~+=-]*)?(\\#[-a-z\\d_]*)?$","i");return e.test(t)?!0:!1},loadContent:function(t,e){t.html(e)},addPrefix:function(t){var e=t.attr("id"),n=t.attr("class");"string"==typeof e&&""!==e&&t.attr("id",e.replace(/([A-Za-z0-9_.\-]+)/g,"sidr-id-$1")),"string"==typeof n&&""!==n&&"sidr-inner"!==n&&t.attr("class",n.replace(/([A-Za-z0-9_.\-]+)/g,"sidr-class-$1")),t.removeAttr("style")},execute:function(o,r,s){"function"==typeof r?(s=r,r="sidr"):r||(r="sidr");var a,c,u,l=t("#"+r),f=t(l.data("body")),d=t("html"),p=l.outerWidth(!0),h=l.data("speed"),m=l.data("side");if("open"===o||"toogle"===o&&!l.is(":visible")){if(l.is(":visible")||e)return;if(n!==!1)return i.close(n,function(){i.open(r)}),void 0;e=!0,"left"===m?(a={left:p+"px"},c={left:"0px"}):(a={right:p+"px"},c={right:"0px"}),u=d.scrollTop(),d.css("overflow-x","hidden").scrollTop(u),f.css({width:f.width(),position:"absolute"}).animate(a,h),l.css("display","block").animate(c,h,function(){e=!1,n=r,"function"==typeof s&&s(r)})}else{if(!l.is(":visible")||e)return;e=!0,"left"===m?(a={left:0},c={left:"-"+p+"px"}):(a={right:0},c={right:"-"+p+"px"}),u=d.scrollTop(),d.removeAttr("style").scrollTop(u),f.animate(a,h),l.animate(c,h,function(){l.removeAttr("style"),f.removeAttr("style"),t("html").removeAttr("style"),e=!1,n=!1,"function"==typeof s&&s(r)})}}},i={open:function(t,e){o.execute("open",t,e)},close:function(t,e){o.execute("close",t,e)},toogle:function(t,e){o.execute("toogle",t,e)}};t.sidr=function(e){return i[e]?i[e].apply(this,Array.prototype.slice.call(arguments,1)):"function"!=typeof e&&"string"!=typeof e&&e?(t.error("Method "+e+" does not exist on jQuery.sidr"),void 0):i.toogle.apply(this,arguments)},t.fn.sidr=function(e){var n=t.extend({name:"sidr",speed:200,side:"left",source:null,renaming:!0,body:"body"},e),r=n.name,s=t("#"+r);if(0===s.length&&(s=t("<div />").attr("id",r).appendTo(t("body"))),s.addClass("sidr").addClass(n.side).data({speed:n.speed,side:n.side,body:n.body}),"function"==typeof n.source){var a=n.source(r);o.loadContent(s,a)}else if("string"==typeof n.source&&o.isUrl(n.source))t.get(n.source,function(t){o.loadContent(s,t)});else if("string"==typeof n.source){var c="",u=n.source.split(",");if(t.each(u,function(e,n){c+='<div class="sidr-inner">'+t(n).html()+"</div>"}),n.renaming){var l=t("<div />").html(c);l.find("*").each(function(e,n){var i=t(n);o.addPrefix(i)}),c=l.html()}o.loadContent(s,c)}else null!==n.source&&t.error("Invalid Sidr Source");return this.each(function(){var e=t(this),n=e.data("sidr");n||(e.data("sidr",r),e.click(function(t){t.preventDefault(),i.toogle(r)}))})}}(jQuery),function(t){t.fn.touchwipe=function(e){var n={min_move_x:20,min_move_y:20,wipeLeft:function(){},wipeRight:function(){},wipeUp:function(){},wipeDown:function(){},preventDefaultEvents:!0};return e&&t.extend(n,e),this.each(function(){function t(){this.removeEventListener("touchmove",e),i=null,s=!1}function e(e){if(n.preventDefaultEvents&&e.preventDefault(),s){var o=e.touches[0].pageX,a=e.touches[0].pageY,c=i-o,u=r-a;Math.abs(c)>=n.min_move_x?(t(),c>0?n.wipeLeft():n.wipeRight()):Math.abs(u)>=n.min_move_y&&(t(),u>0?n.wipeDown():n.wipeUp())}}function o(t){1==t.touches.length&&(i=t.touches[0].pageX,r=t.touches[0].pageY,s=!0,this.addEventListener("touchmove",e,!1))}var i,r,s=!1;"ontouchstart"in document.documentElement&&this.addEventListener("touchstart",o,!1)}),this}}(jQuery);var languagePreference=getCookie("proferotech-language"),currentLanguage=-1!==window.location.href.indexOf("cn")?"chinese":"english",browserLanguage=window.navigator.userLanguage||window.navigator.language;if(browserLanguage=-1!==browserLanguage.indexOf("zh")?"chinese":"english",languagePreference?languagePreference!==currentLanguage&&(window.location="english"===languagePreference?window.location.href.replace("http://proferotech.com/cn/","http://proferotech.com/"):window.location.href.replace("http://proferotech.com/","http://proferotech.com/cn/")):"english"!==browserLanguage&&browserLanguage!==currentLanguage&&(window.location=window.location.href.replace("http://proferotech.com/","http://proferotech.com/cn/")),$(".language-toggle").click(function(){$(this).hasClass("chinese")?setCookie("chinese"):setCookie("english")}),$("document").ready(function(){function t(){n=i.getCenter()}function e(t,e,n,o){var r=new google.maps.Marker({map:i,position:new google.maps.LatLng(t,e),title:n||""});return r.setIcon(o),r}var n,o=$(".map-container"),i=new google.maps.Map(o[0],{zoom:15,disableDefaultUI:!0,disableDoubleClickZoom:!0,draggable:!1,keyboardShortcuts:!1,scrollwheel:!1,center:new google.maps.LatLng(39.917774,116.453311),mapTypeId:google.maps.MapTypeId.ROADMAP});if(google.maps.event.addDomListener(i,"idle",function(){t()}),google.maps.event.addDomListener(window,"resize",function(){i.setCenter(n)}),!s&&(s=e(39.917815,116.453311,"Us!","http://maps.google.com/mapfiles/ms/icons/red-dot.png"),navigator.geolocation)){var r,s=null;navigator.geolocation.getCurrentPosition(function(t){if(!r&&!s){var e={origin:new google.maps.LatLng(t.coords.latitude,t.coords.longitude),destination:new google.maps.LatLng(39.917815,116.453311),travelMode:google.maps.DirectionsTravelMode.DRIVING},n=new google.maps.DirectionsService,o=new google.maps.DirectionsRenderer;o.setMap(i),n.route(e,function(t,e){e==google.maps.DirectionsStatus.OK&&o.setDirections(t)})}})}}),throttle=function(t,e){var n,o,i,r,s=0,a=function(){s=new Date,i=null,r=t.apply(n,o)};return function(){var c=new Date,u=e-(c-s);return n=this,o=arguments,0>=u?(clearTimeout(i),i=null,s=c,r=t.apply(n,o)):i||(i=setTimeout(a,u)),r}},$("document").ready(function(){function t(){$(this).scrollTop()>150?$("#backtotop").addClass("shown"):$("#backtotop").removeClass("shown")}resizePortfolioItems(),$(window).resize(function(){resizePortfolioItems()}),$(".carousel").carousel(),$(".carousel").touchwipe({wipeLeft:function(){$(".carousel").carousel("next")},wipeRight:function(){$(".carousel").carousel("prev")}}),$("#backtotop").click(function(){$("html, body").animate({scrollTop:"0px"},800)}),$(".menu a").click(function(){var t=$(this).attr("href"),e=$(t).offset().top;$("html, body").animate({scrollTop:e},800)});var e=throttle(t,100);$(window).scroll(e)}),window.Modernizr=function(t,e,n){function o(t){y.cssText=t}function i(t,e){return typeof t===e}function r(t,e){return!!~(""+t).indexOf(e)}function s(t,e){for(var o in t){var i=t[o];if(!r(i,"-")&&y[i]!==n)return"pfx"==e?i:!0}return!1}function a(t,e,o){for(var r in t){var s=e[t[r]];if(s!==n)return o===!1?t[r]:i(s,"function")?s.bind(o||e):s}return!1}function c(t,e,n){var o=t.charAt(0).toUpperCase()+t.slice(1),r=(t+" "+b.join(o+" ")+o).split(" ");return i(e,"string")||i(e,"undefined")?s(r,e):(r=(t+" "+$.join(o+" ")+o).split(" "),a(r,e,n))}var u,l,f,d="2.6.2",p={},h=!0,m=e.documentElement,g="modernizr",v=e.createElement(g),y=v.style,w=({}.toString,"Webkit Moz O ms"),b=w.split(" "),$=w.toLowerCase().split(" "),x={},C=[],T=C.slice,L={}.hasOwnProperty;f=i(L,"undefined")||i(L.call,"undefined")?function(t,e){return e in t&&i(t.constructor.prototype[e],"undefined")}:function(t,e){return L.call(t,e)},Function.prototype.bind||(Function.prototype.bind=function(t){var e=this;if("function"!=typeof e)throw new TypeError;var n=T.call(arguments,1),o=function(){if(this instanceof o){var i=function(){};i.prototype=e.prototype;var r=new i,s=e.apply(r,n.concat(T.call(arguments)));return Object(s)===s?s:r}return e.apply(t,n.concat(T.call(arguments)))};return o}),x.csstransitions=function(){return c("transition")};for(var E in x)f(x,E)&&(l=E.toLowerCase(),p[l]=x[E](),C.push((p[l]?"":"no-")+l));return p.addTest=function(t,e){if("object"==typeof t)for(var o in t)f(t,o)&&p.addTest(o,t[o]);else{if(t=t.toLowerCase(),p[t]!==n)return p;e="function"==typeof e?e():e,h!==void 0&&h&&(m.className+=" "+(e?"":"no-")+t),p[t]=e}return p},o(""),v=u=null,function(t,e){function n(t,e){var n=t.createElement("p"),o=t.getElementsByTagName("head")[0]||t.documentElement;return n.innerHTML="x<style>"+e+"</style>",o.insertBefore(n.lastChild,o.firstChild)}function o(){var t=v.elements;return"string"==typeof t?t.split(" "):t}function i(t){var e=g[t[h]];return e||(e={},m++,t[h]=m,g[m]=e),e}function r(t,n,o){if(n||(n=e),l)return n.createElement(t);o||(o=i(n));var r;return r=o.cache[t]?o.cache[t].cloneNode():p.test(t)?(o.cache[t]=o.createElem(t)).cloneNode():o.createElem(t),r.canHaveChildren&&!d.test(t)?o.frag.appendChild(r):r}function s(t,n){if(t||(t=e),l)return t.createDocumentFragment();n=n||i(t);for(var r=n.frag.cloneNode(),s=0,a=o(),c=a.length;c>s;s++)r.createElement(a[s]);return r}function a(t,e){e.cache||(e.cache={},e.createElem=t.createElement,e.createFrag=t.createDocumentFragment,e.frag=e.createFrag()),t.createElement=function(n){return v.shivMethods?r(n,t,e):e.createElem(n)},t.createDocumentFragment=Function("h,f","return function(){var n=f.cloneNode(),c=n.createElement;h.shivMethods&&("+o().join().replace(/\w+/g,function(t){return e.createElem(t),e.frag.createElement(t),'c("'+t+'")'})+");return n}")(v,e.frag)}function c(t){t||(t=e);var o=i(t);return v.shivCSS&&!u&&!o.hasCSS&&(o.hasCSS=!!n(t,"article,aside,figcaption,figure,footer,header,hgroup,nav,section{display:block}mark{background:#FF0;color:#000}")),l||a(t,o),t}var u,l,f=t.html5||{},d=/^<|^(?:button|map|select|textarea|object|iframe|option|optgroup)$/i,p=/^(?:a|b|code|div|fieldset|h1|h2|h3|h4|h5|h6|i|label|li|ol|p|q|span|strong|style|table|tbody|td|th|tr|ul)$/i,h="_html5shiv",m=0,g={};(function(){try{var t=e.createElement("a");t.innerHTML="<xyz></xyz>",u="hidden"in t,l=1==t.childNodes.length||function(){e.createElement("a");var t=e.createDocumentFragment();return t.cloneNode===void 0||t.createDocumentFragment===void 0||t.createElement===void 0}()}catch(n){u=!0,l=!0}})();var v={elements:f.elements||"abbr article aside audio bdi canvas data datalist details figcaption figure footer header hgroup mark meter nav output progress section summary time video",shivCSS:f.shivCSS!==!1,supportsUnknownElements:l,shivMethods:f.shivMethods!==!1,type:"default",shivDocument:c,createElement:r,createDocumentFragment:s};t.html5=v,c(e)}(this,e),p._version=d,p._domPrefixes=$,p._cssomPrefixes=b,p.testProp=function(t){return s([t])},p.testAllProps=c,m.className=m.className.replace(/(^|\s)no-js(\s|$)/,"$1$2")+(h?" js "+C.join(" "):""),p}(this,this.document),function(t,e,n){function o(t){return"[object Function]"==g.call(t)}function i(t){return"string"==typeof t}function r(){}function s(t){return!t||"loaded"==t||"complete"==t||"uninitialized"==t}function a(){var t=v.shift();y=1,t?t.t?h(function(){("c"==t.t?d.injectCss:d.injectJs)(t.s,0,t.a,t.x,t.e,1)},0):(t(),a()):y=0}function c(t,n,o,i,r,c,u){function l(e){if(!p&&s(f.readyState)&&(w.r=p=1,!y&&a(),f.onload=f.onreadystatechange=null,e)){"img"!=t&&h(function(){$.removeChild(f)},50);for(var o in E[n])E[n].hasOwnProperty(o)&&E[n][o].onload()}}var u=u||d.errorTimeout,f=e.createElement(t),p=0,g=0,w={t:o,s:n,e:r,a:c,x:u};1===E[n]&&(g=1,E[n]=[]),"object"==t?f.data=n:(f.src=n,f.type=t),f.width=f.height="0",f.onerror=f.onload=f.onreadystatechange=function(){l.call(this,g)},v.splice(i,0,w),"img"!=t&&(g||2===E[n]?($.insertBefore(f,b?null:m),h(l,u)):E[n].push(f))}function u(t,e,n,o,r){return y=0,e=e||"j",i(t)?c("c"==e?C:x,t,e,this.i++,n,o,r):(v.splice(this.i++,0,t),1==v.length&&a()),this}function l(){var t=d;return t.loader={load:u,i:0},t}var f,d,p=e.documentElement,h=t.setTimeout,m=e.getElementsByTagName("script")[0],g={}.toString,v=[],y=0,w="MozAppearance"in p.style,b=w&&!!e.createRange().compareNode,$=b?p:m.parentNode,p=t.opera&&"[object Opera]"==g.call(t.opera),p=!!e.attachEvent&&!p,x=w?"object":p?"script":"img",C=p?"script":x,T=Array.isArray||function(t){return"[object Array]"==g.call(t)},L=[],E={},P={timeout:function(t,e){return e.length&&(t.timeout=e[0]),t}};d=function(t){function e(t){var e,n,o,t=t.split("!"),i=L.length,r=t.pop(),s=t.length,r={url:r,origUrl:r,prefixes:t};for(n=0;s>n;n++)o=t[n].split("="),(e=P[o.shift()])&&(r=e(r,o));for(n=0;i>n;n++)r=L[n](r);return r}function s(t,i,r,s,a){var c=e(t),u=c.autoCallback;c.url.split(".").pop().split("?").shift(),c.bypass||(i&&(i=o(i)?i:i[t]||i[s]||i[t.split("/").pop().split("?")[0]]),c.instead?c.instead(t,i,r,s,a):(E[c.url]?c.noexec=!0:E[c.url]=1,r.load(c.url,c.forceCSS||!c.forceJS&&"css"==c.url.split(".").pop().split("?").shift()?"c":n,c.noexec,c.attrs,c.timeout),(o(i)||o(u))&&r.load(function(){l(),i&&i(c.origUrl,a,s),u&&u(c.origUrl,a,s),E[c.url]=2})))}function a(t,e){function n(t,n){if(t){if(i(t))n||(f=function(){var t=[].slice.call(arguments);d.apply(this,t),p()}),s(t,f,e,0,u);else if(Object(t)===t)for(c in a=function(){var e,n=0;for(e in t)t.hasOwnProperty(e)&&n++;return n}(),t)t.hasOwnProperty(c)&&(!n&&!--a&&(o(f)?f=function(){var t=[].slice.call(arguments);d.apply(this,t),p()}:f[c]=function(t){return function(){var e=[].slice.call(arguments);t&&t.apply(this,e),p()}}(d[c])),s(t[c],f,e,c,u))}else!n&&p()}var a,c,u=!!t.test,l=t.load||t.both,f=t.callback||r,d=f,p=t.complete||r;n(u?t.yep:t.nope,!!l),l&&n(l)}var c,u,f=this.yepnope.loader;if(i(t))s(t,0,f,0);else if(T(t))for(c=0;t.length>c;c++)u=t[c],i(u)?s(u,0,f,0):T(u)?d(u):Object(u)===u&&a(u,f);else Object(t)===t&&a(t,f)},d.addPrefix=function(t,e){P[t]=e},d.addFilter=function(t){L.push(t)},d.errorTimeout=1e4,null==e.readyState&&e.addEventListener&&(e.readyState="loading",e.addEventListener("DOMContentLoaded",f=function(){e.removeEventListener("DOMContentLoaded",f,0),e.readyState="complete"},0)),t.yepnope=l(),t.yepnope.executeStack=a,t.yepnope.injectJs=function(t,n,o,i,c,u){var l,f,p=e.createElement("script"),i=i||d.errorTimeout;p.src=t;for(f in o)p.setAttribute(f,o[f]);n=u?a:n||r,p.onreadystatechange=p.onload=function(){!l&&s(p.readyState)&&(l=1,n(),p.onload=p.onreadystatechange=null)},h(function(){l||(l=1,n(1))},i),c?p.onload():m.parentNode.insertBefore(p,m)},t.yepnope.injectCss=function(t,n,o,i,s,c){var u,i=e.createElement("link"),n=c?a:n||r;i.href=t,i.rel="stylesheet",i.type="text/css";for(u in o)i.setAttribute(u,o[u]);s||(m.parentNode.insertBefore(i,m),h(n,0))}}(this,document),Modernizr.load=function(){yepnope.apply(window,[].slice.call(arguments,0))},$("document").ready(function(){$(".toggle-menu").sidr({name:"sidr-right",side:"right",source:"#menu-content"}),$(".sidr a").bind("click",function(){$.sidr("close","sidr-right")}),enquire.register("screen and (min-width:980px)",{match:function(){$.sidr("close","sidr-right")}})}),window.matchMedia){var mediaQueryList=window.matchMedia("print");mediaQueryList.addListener(function(t){t.matches?beforePrint():afterPrint()})}window.onbeforeprint=beforePrint,window.onafterprint=afterPrint,function(t,e){"use strict";var n=e.Modernizr;t.CBPQTRotator=function(e,n){this.$el=t(n),this._init(e)},t.CBPQTRotator.defaults={speed:700,easing:"ease",interval:8e3},t.CBPQTRotator.prototype={_init:function(e){this.options=t.extend(!0,{},t.CBPQTRotator.defaults,e),this._config(),this.$items.eq(this.current).addClass("current"),this.support&&this._setTransition(),this._startRotator()},_config:function(){this.$items=this.$el.children(".testimonial"),this.itemsCount=this.$items.length,this.current=0,this.support=n.csstransitions,this.support&&(this.$progress=t('<span class="progress"></span>').appendTo(this.$el))},_setTransition:function(){setTimeout(t.proxy(function(){this.$items.css("transition","all "+this.options.speed+"ms "+this.options.easing)},this),25)},_startRotator:function(){this.support&&this._startProgress(),setTimeout(t.proxy(function(){this.support&&this._resetProgress(),this._next(),this._startRotator()},this),this.options.interval)},_next:function(){this.$items.eq(this.current).removeClass("current"),this.current=this.current<this.itemsCount-1?this.current+1:0,this.$items.eq(this.current).addClass("current")},_startProgress:function(){setTimeout(t.proxy(function(){this.$progress.css({transition:"width "+this.options.interval+"ms linear",width:"100%"})},this),25)},_resetProgress:function(){this.$progress.css({transition:"none",width:"0%"})},destroy:function(){this.support&&(this.$items.css("transition","none"),this.$progress.remove()),this.$items.removeClass("current").css({position:"relative","z-index":100,"pointer-events":"auto",opacity:1})}};var o=function(t){e.console&&e.console.error(t)};t.fn.cbpQTRotator=function(e){if("string"==typeof e){var n=Array.prototype.slice.call(arguments,1);this.each(function(){var i=t.data(this,"cbpQTRotator");return i?t.isFunction(i[e])&&"_"!==e.charAt(0)?(i[e].apply(i,n),undefined):(o("no such method '"+e+"' for cbpQTRotator instance"),undefined):(o("cannot call methods on cbpQTRotator prior to initialization; attempted to call method '"+e+"'"),undefined)})}else this.each(function(){var n=t.data(this,"cbpQTRotator");n?n._init():n=t.data(this,"cbpQTRotator",new t.CBPQTRotator(e,this))});return this}}(jQuery,window),$("document").ready(function(){$(".testimonials").cbpQTRotator()});